{"version":3,"file":"stampVersion.js","sourceRoot":"","sources":["../src/stampVersion.ts"],"names":[],"mappings":";AAAA;;;;;GAKG;;;;;AAEH,kEAA0C;AAC1C,gDAAwB;AACxB,kDAA0B;AAC1B,oDAA4B;AAE5B,uEAAoE;AACpE,wEAAgD;AAEhD,MAAM,EAAC,IAAI,EAAC,GAAG,eAAK;KACjB,KAAK,CAAC,CAAC,IAAI,EAAE,EAAE;IACd,IAAI,IAAI,CAAC,CAAC,CAAC,MAAM,KAAK,CAAC,IAAI,gBAAM,CAAC,KAAK,CAAS,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;QAC1D,OAAO,IAAI,CAAC;KACb;SAAM;QACL,MAAM,IAAI,KAAK,CAAC,gCAAgC,CAAC,CAAC;KACnD;AACH,CAAC,CAAC;KACD,cAAc,CAAC,KAAK,CAAC,CAAC;AAEzB,CAAC,KAAK,IAAI,EAAE;IACV,MAAM,OAAO,GAAW,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAClC,MAAM,sBAAsB,CAAC,OAAO,CAAC,CAAC;AACxC,CAAC,CAAC,EAAE,CAAC;AAEL;;GAEG;AACH,KAAK,UAAU,sBAAsB,CAAC,OAAe;IACnD,MAAM,QAAQ,GAAG,MAAM,IAAA,yBAAe,EAAC,OAAO,CAAC,CAAC;IAEhD,MAAM,UAAU,GAAG,MAAM,IAAA,+BAAe,EAAC,sBAAsB,CAAC,CAAC;IACjE,MAAM,SAAS,GAAG,cAAI,CAAC,IAAI,CACzB,UAAW,CAAC,IAAI,EAChB,iDAAiD,CAClD,CAAC;IAEF,MAAM,YAAE,CAAC,SAAS,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC;AAC1C,CAAC","sourcesContent":["/**\n * Copyright (c) Microsoft Corporation.\n * Licensed under the MIT License.\n *\n * @format\n */\n\nimport fs from '@react-native-windows/fs';\nimport path from 'path';\nimport yargs from 'yargs';\nimport semver from 'semver';\n\nimport {findRepoPackage} from '@react-native-windows/package-utils';\nimport renderPropsFile from './renderPropsFile';\n\nconst {argv} = yargs\n  .check((args) => {\n    if (args._.length === 1 && semver.valid(<string>args._[0])) {\n      return true;\n    } else {\n      throw new Error('Usage: stamp-version <version>');\n    }\n  })\n  .showHelpOnFail(false);\n\n(async () => {\n  const version = <string>argv._[0];\n  await setPackageVersionProps(version);\n})();\n\n/**\n * Rewrites PackageVersion.g.props\n */\nasync function setPackageVersionProps(version: string) {\n  const propsStr = await renderPropsFile(version);\n\n  const rnwPackage = await findRepoPackage('react-native-windows');\n  const propsPath = path.join(\n    rnwPackage!.path,\n    'PropertySheets/Generated/PackageVersion.g.props',\n  );\n\n  await fs.writeFile(propsPath, propsStr);\n}\n"]}